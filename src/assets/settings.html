<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <link href="css/bootstrap.css" rel="stylesheet">
    <link href="css/datatables.css" rel="stylesheet">
    <link href="css/bootstrap-icons.css" rel="stylesheet">

    <title>A10fy Welcome Screen</title>
</head>
<body>
<datalist id="modelTechnicalNamesList">
    <option>gemini-1.5-flash</option>
    <option>gemini-1.5-flash-latest</option>
    <option>gemini-1.5-pro</option>
    <option>gemini-1.5-pro-latest</option>
</datalist>
<datalist id="embeddingModelsDataList">
    <option>text-embedding-004</option>
</datalist>
<div id="editModelModal" class="modal fade" tabindex="-1" data-bs-backdrop="static">
    <div class="modal-dialog modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Edit model</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3 form-floating">
                        <input type="text" class="form-control" id="modelName" placeholder="Name">
                        <label for="modelName" class="form-label">Name</label>
                    </div>
                    <div class="mb-3 form-floating">
                        <input type="text" class="form-control" id="modelDescription" placeholder="Description">
                        <label for="modelDescription" class="form-label">Description</label>
                    </div>
                    <div class="mb-3 form-floating">
                        <input list="modelTechnicalNamesList" type="text" style="font-family: monospace" class="form-control" id="modelTechnicalName" placeholder="Model technical name" required>
                        <label for="modelTechnicalName" class="form-label">Model technical name</label>
                    </div>
                    <div class="mb-3">
                        <input type="checkbox" class="form-check-input" id="modelVisibleInChat">
                        <label for="modelVisibleInChat" class="form-label">Available in chat mode</label>
                    </div>
                    <h5 class="card-title mt-5 mb-2">Generation Settings <a target="_blank" href="https://cloud.google.com/vertex-ai/generative-ai/docs/learn/prompts/adjust-parameter-values#temperature"><i class="bi bi-info-circle"></i></a></h5>
                    <div class="mb-3 form-floating has-validation">
                        <input type="number" class="form-control" id="modelTopK" placeholder="Top-K">
                        <label for="modelTopK" class="form-label">Top-K</label>
                        <div class="invalid-feedback">Top-K should be a positive integer.</div>
                    </div>
                    <div class="mb-3 form-floating has-validation">
                        <input type="number" class="form-control" id="modelTopP" placeholder="Top-P">
                        <label for="modelTopP" class="form-label">Top-P</label>
                        <div class="invalid-feedback">Top-P should be a number between 0 and 1.</div>
                    </div>
                    <div class="mb-3 form-floating has-validation">
                        <input type="number" class="form-control" id="modelTemperature" placeholder="Temperature">
                        <label for="modelTemperature" class="form-label">Temperature</label>
                        <div class="invalid-feedback">Temperature should be a number between 0 and 2.</div>
                    </div>
                    <div class="mb-3 form-floating">
                        <input type="password" class="form-control" id="modelApiKey" placeholder="API Key">
                        <label for="modelApiKey" class="form-label">API Key (leave blank to use the default one)</label>
                    </div>
                    <h5 class="card-title mt-5 mb-2">Safety Settings <a target="_blank" href="https://cloud.google.com/vertex-ai/generative-ai/docs/multimodal/configure-safety-attributes#configurable-filters"><i class="bi bi-info-circle"></i></a></h5>
                    <div class="mb-3 form-floating">
                        <select class="form-select" id="modelSafetyDangerousContent">
                            <option value="HARM_BLOCK_THRESHOLD_UNSPECIFIED">(unspecified)</option>
                            <option value="BLOCK_ONLY_HIGH">Block high probability violations</option>
                            <option value="BLOCK_MEDIUM_AND_ABOVE">Block medium+ probability violations</option>
                            <option value="BLOCK_LOW_AND_ABOVE">Block low+ probability violations</option>
                            <option value="BLOCK_NONE">Block nothing (requires approval from Google)</option>
                        </select>
                        <label for="modelSafetyDangerousContent" class="form-label">Dangerous content blocker sensitivity</label>
                    </div>
                    <div class="mb-3 form-floating">
                        <select class="form-select" id="modelSafetyHateSpeech">
                            <option value="HARM_BLOCK_THRESHOLD_UNSPECIFIED">(unspecified)</option>
                            <option value="BLOCK_ONLY_HIGH">Block high probability violations</option>
                            <option value="BLOCK_MEDIUM_AND_ABOVE">Block medium+ probability violations</option>
                            <option value="BLOCK_LOW_AND_ABOVE">Block low+ probability violations</option>
                            <option value="BLOCK_NONE">Block nothing (requires approval from Google)</option>
                        </select>
                        <label for="modelSafetyHateSpeech" class="form-label">Hate speech content blocker sensitivity</label>
                    </div>
                    <div class="mb-3 form-floating">
                        <select class="form-select" id="modelSafetyHarassment">
                            <option value="HARM_BLOCK_THRESHOLD_UNSPECIFIED">(unspecified)</option>
                            <option value="BLOCK_ONLY_HIGH">Block high probability violations</option>
                            <option value="BLOCK_MEDIUM_AND_ABOVE">Block medium+ probability violations</option>
                            <option value="BLOCK_LOW_AND_ABOVE">Block low+ probability violations</option>
                            <option value="BLOCK_NONE">Block nothing (requires approval from Google)</option>
                        </select>
                        <label for="modelSafetyHarassment" class="form-label">Harassment content blocker sensitivity</label>
                    </div>
                    <div class="mb-3 form-floating">
                        <select class="form-select" id="modelSafetySexuallyExplicit">
                            <option value="HARM_BLOCK_THRESHOLD_UNSPECIFIED">(unspecified)</option>
                            <option value="BLOCK_ONLY_HIGH">Block high probability violations</option>
                            <option value="BLOCK_MEDIUM_AND_ABOVE">Block medium+ probability violations</option>
                            <option value="BLOCK_LOW_AND_ABOVE">Block low+ probability violations</option>
                            <option value="BLOCK_NONE">Block nothing (requires approval from Google)</option>
                        </select>
                        <label for="modelSafetySexuallyExplicit" class="form-label">Sexually explicit content blocker sensitivity</label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="saveModelButton">Save changes</button>
            </div>
        </div>
    </div>
</div>

<div id="editPersonaModal" class="modal fade" tabindex="-1" data-bs-backdrop="static">
    <div class="modal-dialog modal-dialog-scrollable modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Edit persona</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="mb-3 form-floating">
                        <input type="text" class="form-control" id="personaName">
                        <label for="personaName" class="form-label">Name</label>
                    </div>
                    <div class="mb-3 form-floating">
                        <input type="text" class="form-control" id="personaDescription">
                        <label for="personaDescription" class="form-label">Description</label>
                    </div>
                    <div class="mb-3 form-floating">
                        <select class="form-select" id="personaModel"></select>
                        <label for="personaModel" class="form-label">Model</label>
                    </div>
                    <div class="mb-3 form-floating">
                        <textarea class="form-control" id="personaSystemInstruction" style="font-family: monospace"></textarea>
                        <label for="personaSystemInstruction" class="form-label">System instruction</label>
                    </div>
                    <div class="alert alert-info" role="alert">
                        <i class="bi bi-info-circle mb-2"></i> System instruction or <em>system prompt</em> is the very first instruction that is given to model to steer its behavior during the subsequent chat. System instruction should be a valid Liquid.JS template, see <a target="_blank" class="alert-link" href="https://liquidjs.com/playground.html#WW91IGFyZSBhIGtub3dsZWRnZWFibGUgcHJvZmVzc29yIG5hbWVkIHt7cGVyc29uYS5uYW1lfX0uCllvdSBleHBsYWluIHRoaW5ncyBpbiB0aGUgbW9zdCBzb3BoaXN0aWNhdGVkIGxhbmd1YWdlIHBvc3NpYmxlLgpUb2RheSBpcyB7e2N1cnJlbnREYXRlLmRhdGV9fS4=,ew0KICAiY3VycmVudERhdGUiOiB7DQogICAgImlzbyI6ICIyMDI0LTA3LTI0VDA2OjA2OjAxLjMyOFoiLA0KICAgICJkYXRlIjogIldlZCBKdWwgMjQgMjAyNCIsDQogICAgInllYXIiOiAyMDI0LA0KICAgICJkYXlPZldlZWsiOiA0LA0KICAgICJkYXlPZldlZWtOYW1lIjogIldlZG5lc2RheSINCiAgfSwNCiAgIm1vZGVsIjogew0KICAgICJuYW1lIjogIkhpZ2hseSBjcmVhdGl2ZSBtb2RlbCIsDQogICAgImRlc2NyaXB0aW9uIjogIkEgbW9kZWwgd2l0aCBoaWdoZXN0IHNldHRpbmdzIG9mIFRlbXBlcmF0dXJlIGFuZCBoaWdoIFRvcC1QIGFuZCBUb3AtSyBwYXJhbWV0ZXJzLiINCiAgfSwNCiAgInBlcnNvbmEiOiB7DQogICAgIm5hbWUiOiAiUHJvZmVzc29yIEpla3lsbCIsDQogICAgImRlc2NyaXB0aW9uIjogIkEgcHJvZmVzc29yIG9mIGV2ZXJ5dGhpbmcuIg0KICB9DQp9">an example of a template</a> which demonstrates the variables exposed to the template. Do not worry about the Liquid.JS syntax if you do not need it, consider system instruction just plain text then. System prompts can be <a href="https://x.com/AmandaAskell/status/1765207842993434880">quite elaborate</a>, but do not have to.
                    </div>
                    <div class="mb-3">
                        <input type="checkbox" class="form-check-input" id="personaVisibleInChat">
                        <label for="personaVisibleInChat" class="form-label">Available in chat mode</label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="savePersonaButton">Save changes</button>
            </div>
        </div>
    </div>
</div>

<div id="editCustomActionModal" class="modal fade" tabindex="-1" data-bs-backdrop="static">
    <div class="modal-dialog modal-dialog-scrollable modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Edit custom action</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" style="text-align: left;">
                <form>
                    <h5 class="card-title mb-2">General settings</h5>
                    <div class="mb-3 form-floating">
                        <input type="text" class="form-control" id="customActionName">
                        <label for="customActionName" class="form-label">Name</label>
                    </div>
                    <div class="mb-3 form-floating">
                        <input type="text" class="form-control" id="customActionDescription">
                        <label for="customActionDescription" class="form-label">Description</label>
                    </div>
                    <div class="mb-3 form-floating">
                        <input type="text" class="form-control" id="customActionHandle" style="font-family: monospace">
                        <label for="customActionHandle" class="form-label">Handle</label>
                    </div>
                    <div class="mb-3 form-floating">
                        <input type="text" class="form-control" id="customActionPathInContextMenu">
                        <label for="customActionPathInContextMenu" class="form-label">Browser context menu item title</label>
                    </div>
                    <div class="alert alert-info" role="alert">
                        <i class="bi bi-info-circle mb-2"></i> The action’s handle is a short name that can be used to call action from a chat.
                    </div>
                    <h5 class="card-title mt-3 mb-2">Code player and system instruction</h5>
                    <div class="mb-3 form-floating">
                        <select class="form-select" id="customActionPlayer"></select>
                        <label for="customActionPlayer" class="form-label">Code player used to produce the result</label>
                    </div>
                    <div class="alert alert-info" role="alert">
                        <i class="bi bi-info-circle mb-2"></i> If no player is selected, then the result of the action is considered to be just the direct output of the model. It will be displayed as markdown in the chat or in the action pane.
                    </div>
                    <div class="mb-3 form-floating">
                        <textarea class="form-control" id="customActionSystemInstruction" style="font-family: monospace"></textarea>
                        <label for="customActionSystemInstruction" class="form-label">System instruction</label>
                    </div>
                    <div class="mb-3 form-floating">
                        <textarea class="form-control" id="customActionMessage" style="font-family: monospace"></textarea>
                        <label for="customActionMessage" class="form-label">Message</label>
                    </div>
                    <div class="alert alert-info" role="alert">
                        <i class="bi bi-info-circle mb-2"></i> If you leave system instruction empty, then LLM will not be called, and instead the DOM element's OuterHTML will be passed directly to the Player, the language tag passed to the player will then equal to <code>_json_call_</code>.
                        Both system instruction and message are written using Liquid.JS, see <a target="_blank" class="alert-link" href="https://liquidjs.com/playground.html#eyUgaWYgc2VsZWN0aW9uLnRleHQgLSV9ClRoZSB1c2VyIGhhcyBzZWxlY3RlZCB0aGUgZm9sbG93aW5nIHRleHQ6CmBgYAp7eyBzZWxlY3Rpb24udGV4dCB8IHN0cmlwIH19CmBgYAp7JSBlbmRpZiAlfQp7JS0gaWYgZG9jdW1lbnQudGl0bGUgJX0KVGhlIHRpdGxlIG9mIHRoZSBkb2N1bWVudCBpczoKYGBgCnt7IGRvY3VtZW50LnRpdGxlIH19CmBgYAp7JS0gZW5kaWYgJX0KCkRlc2NyaWJlIGlmIHRoZSB0ZXh0IGlzIHJlbGV2YW50IHRvIHRoZSBkb2N1bWVudCB0b3BpYy4gCk91dHB1dCBhIEpTT04gb2JqZWN0IGxpa2UgdGhpczoKewogIHslLSBjb21tZW50ICV9IFJlYXNvbmluZyB3aWxsIGluY3JlYXNlIHRoZSBvdXRwdXQgcXVhbGl0eSB7JSBlbmRjb21tZW50ICV9CiAgImV4cGxhbmF0aW9uIjogc3RyaW5nLAogIHslLSBjb21tZW50ICV9IFdlIGxldCBMTE0gZGVjaWRlIHRoZSBjcml0ZXJpYSB7JSBlbmRjb21tZW50ICV9CiAgInJlbGV2YW5jZVNjb3JlIjogbnVtYmVyCn0Kd2hlcmUgcmVsZXZhbmNlU2NvcmUgaXMgZnJvbSAxIHRvIDMsIAphbmQgZXhwbGFuYXRpb24gaXMgYSBzaW5nbGUgc2VudGVuY2UgZXhwbGFpbmluZyB3aHkgeW91IGFzc2lnbmVkIAphIHBhcnRpY3VsYXIgcmVsZXZhbmNlIHNjb3JlLg==,ewogICJlbGVtZW50IjogewogICAgImlubmVySFRNTCI6ICI8c3Ryb25nPkExMGZ5PC9zdHJvbmc+IGlzIGNvb2wiLAogICAgIm91dGVySFRNTCI6ICI8c3Bhbj48c3Ryb25nPkExMGZ5PC9zdHJvbmc+IGlzIGNvb2w8L3NwYW4+IiwKICAgICJpbm5lclRleHQiOiAiQTEwZnkgaXMgY29vbCIKICB9LAogICJkb2N1bWVudCI6IHsKICAgICJzaW1wbGlmaWVkSFRNTCI6ICI8Ym9keT4uLi48c3Bhbj48c3Ryb25nPkExMGZ5PC9zdHJvbmc+IGlzIGNvb2w8L3NwYW4+Li4uPC9ib2R5PiIsCiAgICAidGl0bGUiOiAiQWJvdXQgQTEwZnkiCiAgfSwKICAic2VsZWN0aW9uIjogewogICAgInRleHQiOiAiIGNvb2wiCiAgfQp9">an example of a template</a> demonstrating the parameters that are accessible in the template. It is recommended to describe the LLM output format requirements and the task in system instruction, while leaving the page-dependent information for the message.
                    </div>
                    <h5 class="card-title mt-3 mb-2">Model settings</h5>
                    <div class="mb-3 form-floating">
                        <select class="form-select" id="customActionModel"></select>
                        <label for="customActionModel" class="form-label">Model</label>
                    </div>
                    <div class="mb-3">
                        <input type="checkbox" class="form-check-input" id="customActionModelJSONMode">
                        <label for="customActionModelJSONMode" class="form-label">Call LLM in JSON mode</label>
                    </div>
                    <div class="alert alert-info" role="alert">
                        <i class="bi bi-info-circle mb-2"></i> If you call LLM in JSON mode, it will produce valid JSON which will be passed to the player as the code to process. The language tag passed to the player will then equal to <code>_json_</code>. If LLM is not called in JSON mode, then the first fenced block with language tag matching the tags supported by the code player will be extracted from LLM’s output and passed to the player.
                    </div>
                    <h5 class="card-title mt-3 mb-2">Target element of the webpage</h5>
                    <div class="mb-3 form-floating">
                        <input type="text" class="form-control" style="font-family: monospace" id="customActionTextSelectionRegExp">
                        <label for="customActionTextSelectionRegExp" class="form-label">RegExp for selected text required to call action</label>
                    </div>
                    <div class="mb-3 form-floating">
                        <input type="text" class="form-control" style="font-family: monospace" id="customActionSelector">
                        <label for="customActionSelector" class="form-label">CSS selector (leave empty if no target element is required)</label>
                    </div>
                    <div class="mb-3">
                        <input type="checkbox" class="form-check-input" id="customActionSelectorImageRequired">
                        <label for="customActionSelectorImageRequired" class="form-label">Take element with image content only</label>
                    </div>
                    <div class="mb-3">
                        <label for="customActionSelectorBehavior" class="form-label">Element selection strategy</label>
                        <select class="form-select" id="customActionSelectorBehavior">
                            <option value="exact">Take the exact clicked element if possible</option>
                            <option value="deepest">Take the deepest element in DOM tree</option>
                            <option value="closestToRoot">Take the element closest to DOM tree root</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <input type="checkbox" class="form-check-input" id="customActionSelectorAllowSearchInDescendants">
                        <label for="customActionSelectorAllowSearchInDescendants" class="form-label">Search element’s descendants if element itself does not match</label>
                    </div>
                    <div class="mb-3">
                        <input type="checkbox" class="form-check-input" id="customActionSelectorAllowSearchInSelection">
                        <label for="customActionSelectorAllowSearchInSelection" class="form-label">Search in selection on page if nothing else matches</label>
                    </div>
                    <div class="mb-3">
                        <input type="checkbox" class="form-check-input" id="customActionSendElementSnapshotToLLM">
                        <label for="customActionSendElementSnapshotToLLM" class="form-label">Send element graphical snapshot to LLM</label>
                    </div>
                    <div class="mb-3">
                        <input type="checkbox" class="form-check-input" id="customActionSendPageSnapshotToLLM">
                        <label for="customActionSendPageSnapshotToLLM" class="form-label">Send page graphical snapshot to LLM</label>
                    </div>
                    <h5 class="card-title mt-3 mb-2">Results presentation</h5>
                    <label for="customActionResultsPresentation" class="form-label">How the LLM/player call results are presented in the side panel</label>
                    <select class="form-select" id="customActionResultsPresentation">
                        <option value="chatPaneComplete">Chat pane; keep non-code LLM output</option>
                        <option value="chatPane">Chat pane; omit non-code LLM output</option>
                        <option value="actionPane">Action pane; omit non-code LLM output</option>
                        <option value="actionOrChatPaneComplete">Action (priority) or chat pane; keep non-code LLM output if in chat</option>
                        <option value="actionOrChatPane">Action (priority) or chat pane; omit non-code LLM output if in chat</option>
                        <option value="chatOrActionPaneComplete">Chat (priority) or action pane; keep non-code LLM output if in chat</option>
                        <option value="chatOrActionPane">Chat (priority) or action pane; omit non-code LLM output if in chat</option>
                    </select>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="saveCustomActionButton">Save changes</button>
            </div>
        </div>
    </div>
</div>

<div id="editCodePlayerModal" class="modal fade" data-bs-backdrop="static">
    <div class="modal-dialog modal-dialog-scrollable modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Edit custom code player</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" style="text-align: left;">
                <form>
                    <div class="mb-3 form-floating">
                        <input type="text" class="form-control" id="codePlayerName">
                        <label for="codePlayerName" class="form-label">Name</label>
                    </div>
                    <div class="mb-3 form-floating">
                        <input type="text" class="form-control" id="codePlayerLanguageTags">
                        <label for="codePlayerLanguageTags" class="form-label">Language tags (comma separated)</label>
                    </div>
                    <div class="mb-3 form-floating">
                        <input type="text" class="form-control" id="codePlayerDescription">
                        <label for="codePlayerDescription" class="form-label">Description</label>
                    </div>
                    <div class="mb-3">
                        <input type="checkbox" class="form-check-input" id="codePlayerAutoplay">
                        <label for="codePlayerAutoplay" class="form-label">Autoplay</label>
                    </div>
                    <div class="mb-3">
                        <input type="checkbox" class="form-check-input" id="codePlayerHideCode">
                        <label for="codePlayerHideCode" class="form-label">Hide original code</label>
                    </div>
                    <div class="mb-3 form-floating">
                        <textarea class="form-control" id="codePlayerCSS" style="font-family: monospace"></textarea>
                        <label for="codePlayerCSS" class="form-label">CSS Styles</label>
                    </div>
                    <div class="mb-3 form-floating">
                        <textarea class="form-control" id="codePlayerJS" style="font-family: monospace"></textarea>
                        <label for="codePlayerJS" class="form-label">JavaScript Code</label>
                    </div>
                    <div class="mb-3 form-floating">
                        <textarea class="form-control" id="codePlayerHTML" style="font-family: monospace"></textarea>
                        <label for="codePlayerHTML" class="form-label">HTML Code</label>
                    </div>
                </form>
                <div class="card my-4">
                    <div class="card-header"><h6 class="card-title mt-1">Try out the custom player</h6></div>
                    <div class="card-body">
                        <form>
                            <div class="mb-3 form-floating">
                                <input type="text" class="form-control" id="playerDebugLanguage">
                                <label for="playerDebugLanguage" class="form-label">Language tag</label>
                            </div>
                            <div class="mb-3 form-floating">
                                <textarea class="form-control" id="playerDebugCode" style="font-family: monospace"></textarea>
                                <label for="playerDebugCode" class="form-label">Code to run the player on</label>
                            </div>
                            <button type="button" class="btn btn-secondary" id="playerDebugButton">Run!</button>
                        </form>
                        <h6 class="card-title mt-3" id="playerDebugOutputHeader">The results of the run will be shown here:</h6>
                        <div class="container-fluid mx-0 px-0" id="playerDebugOutput"></div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="saveCodePlayerButton">Save changes</button>
            </div>
        </div>
    </div>
</div>


<div class="container-fluid d-flex flex-column">
    <ul class="nav nav-tabs" id="mainTabs" role="tablist">
        <li class="nav-item" role="presentation">
            <button class="nav-link active" id="setupTab" data-bs-toggle="tab" data-bs-target="#setupPane" type="button" role="tab" aria-controls="setupPane" aria-selected="true"><i class="bi bi-gift"></i> Quick Setup</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="modelSettingsTab" data-bs-toggle="tab" data-bs-target="#modelSettingsPane" type="button" role="tab" aria-controls="modelSettingsPane" aria-selected="false"><i class="bi bi-robot"></i> Models</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="personaSettingsTab" data-bs-toggle="tab" data-bs-target="#personaSettingsPane" type="button" role="tab" aria-controls="personaSettingsPane" aria-selected="false"><i class="bi bi-people"></i> Personas</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="actionSettingsTab" data-bs-toggle="tab" data-bs-target="#actionSettingsPane" type="button" role="tab" aria-controls="actionSettingsPane" aria-selected="false"><i class="bi bi-magic"></i> Actions</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="miscSettingsTab" data-bs-toggle="tab" data-bs-target="#miscSettingsPane" type="button" role="tab" aria-controls="miscSettingsPane" aria-selected="false"><i class="bi bi-tools"></i> Other Settings</button>
        </li>
        <li class="nav-item" role="presentation">
            <button class="nav-link" id="aboutTab" data-bs-toggle="tab" data-bs-target="#aboutPane" type="button" role="tab" aria-controls="aboutPane" aria-selected="false"><i class="bi bi-info-circle"></i> About</button>
        </li>
    </ul>
    <div class="tab-content">
        <div class="tab-pane fade show active" id="setupPane" role="tabpanel" aria-labelledby="setupTab">
            <div class="card" style="border-top-left-radius: 0; border-top-right-radius: 0;">
                <div class="card-body">
                    <h5 class="card-title mb-3">Let’s set up the extension!</h5>
                    <div class="alert alert-info" role="alert">
                        <i class="bi bi-info-circle mb-2"></i>
                        <p>The A10fy extension is powered by Google Gemini family of large language models available under <a target="_blank" href="https://ai.google.dev/pricing" class="alert-link">Free or Paid pricing tiers</a>. All the data that you exchange with the model comes to Google APIs directly and is not stored by A10fy extension anywhere but locally in your browser’s storage, so the <strong>authors of the extension do not have access to your data</strong>. However, <a target="_blank" href="https://ai.google.dev/gemini-api/terms#data-use-unpaid" class="alert-link">if you are on Free tier of the Google Gemini, the data that comes to Gemini API may be used by Google to improve its services</a>, so it is recommended <strong>not to submit sensitive, confidential, or personal information to the chat and not use the A10fy assistant on pages containing confidential or personal information if you are on Free tier of Gemini API</strong>. According to Google’s <a target="_blank" href="https://ai.google.dev/gemini-api/terms#age-requirements" class="alert-link">Terms of Service</a>, <strong>you must be at least 18 years old</strong> to use the services that power the A10fy extension.</p>
                    </div>
                    <div class="h5 mb-2 card-title">Enter the default Gemini API key (you can get it <a target="_blank" href="https://aistudio.google.com/app/apikey">here</a>)</div>
                    <div class="mb-3 form-floating"><input class="form-control" id="mainGoogleApiKey" type="password" placeholder="API key"><label for="mainGoogleApiKey">Google Gemini API key</label></div>
                    <div class="h5 mt-3 mb-2 card-title">Permissions</div>
                    <div class="card-text">
                        Please <a id="allowToUseMicrophone" href="#">allow the extension to use your microphone</a> to be able to dictate requests. You will only have to do it once.
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane fade container-lg" id="modelSettingsPane" role="tabpanel" aria-labelledby="modelSettingsTab">
            <div class="card my-4">
                <div class="card-header"><h5 class="card-title mt-1"><i class="bi bi-robot"></i> Models</h5></div>
                <div class="card-body">
                    <div class="alert alert-info" role="alert">
                        <i class="bi bi-info-circle"></i>
                        <p>Large Language Models or just “Models” for short are the algorithms that generate text messages in response to user’s input. Google Gemini API currently provides <a target="_blank" href="https://ai.google.dev/gemini-api/docs/models/gemini#gemini-1.5-flash" class="alert-link">Gemini Flash</a> and <a target="_blank" href="https://ai.google.dev/gemini-api/docs/models/gemini#gemini-1.5-pro" class="alert-link">Gemini Pro</a> models, the latter being more advanced and capable of more complex tasks, but costing more if you are on a paid plan. The stable versions of the models are available under technical names  The latest versions of those models are <code>gemini-1.5-flash-latest</code> and <code>gemini-1.5-pro-latest</code> respectively, while their stable versions are <code>gemini-1.5-flash</code> and <code>gemini-1.5-pro</code>.</p>
                        <p>The Gemini models are available under <a target="_blank" href="https://ai.google.dev/pricing" class="alert-link">Free or Paid pricing tiers</a>. All the data that you exchange with the model comes to Google APIs directly and is not stored by A10fy extension anywhere but locally in your browser’s storage, so the <strong>authors of the extension do not have access to your data</strong>. However, <a target="_blank" href="https://ai.google.dev/gemini-api/terms#data-use-unpaid" class="alert-link">if you are on Free tier of the Google Gemini, the data that comes to the model may be used by Google to improve its services</a>, so it is recommended <strong>not to submit sensitive, confidential, or personal information to the chat and not use the A10fy assistant on pages containing confidential or personal information if you are on Free tier of Gemini API</strong>.</p>
                    </div>
                    <button aria-label="Add a model" class="btn btn-outline-primary my-3 px-2" id="newModelButton"><i class="bi bi-plus-square-fill"></i> Add model</button>
                    <table id="modelsTable" class="table table-striped table-hover row-border" style="width: 100%; bottom:0">
                        <thead>
                        <tr>
                            <th>Name</th>
                            <th>Description</th>
                            <th>Technical name</th>
                            <th><a target="_blank" href="https://cloud.google.com/vertex-ai/generative-ai/docs/learn/prompts/adjust-parameter-values#top-k" class="link-underline-info link-underline-opacity-50">Top-K</a>/<a target="_blank" href="https://cloud.google.com/vertex-ai/generative-ai/docs/learn/prompts/adjust-parameter-values#top-p" class="link-underline-info link-underline-opacity-50">Top-P</a>/<a target="_blank" href="https://cloud.google.com/vertex-ai/generative-ai/docs/learn/prompts/adjust-parameter-values#temperature" class="link-underline-info link-underline-opacity-50">Temperature</a></th>
                            <th>API key</th>
                            <th></th>
                        </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
            <div class="card my-4">
                <div class="card-header"><h5 class="card-title mt-1"><i class="bi bi-magic"></i> Assistant model settings</h5></div>
                <div class="card-body">
                    <div class="alert alert-info" role="alert">
                        <i class="bi bi-info-circle"></i>
                        <p>Assistant model is the model that is used to process voice requests and perform actions on the page that are integrated into the extension. This model will also be used to summarize the content of the webpages for the Enhanced History Search feature. If API key is left blank, the <a href="#mainGoogleApiKey" class="alert-link open-quick-setup">default API key</a> will be used.</p>
                    </div>
                    <div class="mb-3 form-floating">
                        <input type="password" class="form-control" id="assistantModelApiKey" placeholder="API key">
                        <label for="assistantModelApiKey" class="form-label">Assistant model API key</label>
                    </div>
                    <div class="mb-3 form-floating">
                        <input list="modelTechnicalNamesList" type="text" style="font-family: monospace" class="form-control" id="assistantModelTechnicalName" placeholder="Technical name">
                        <label for="assistantModelTechnicalName" class="form-label">Assistant model technical name</label>
                    </div>
                    <button aria-label="Edit assistant model" class="btn btn-outline-primary my-3 px-2" id="editAssistantModelButton"><i class="bi bi-pencil-square"></i> Edit advanced assistant model settings</button>
                </div>
            </div>
            <div class="card my-4">
                <div class="card-header"><h5 class="card-title mt-1"><i class="bi bi-search"></i> Embedding model settings</h5></div>
                <div class="card-body">
                    <div class="alert alert-info" role="alert">
                        <i class="bi bi-info-circle"></i>
                        <p>Embedding model is a special model that produces abstract representations of textual data. This model is used for the Enhanced History Search feature. If unsure, leave the following settings intact. If API key is left blank, the <a href="#mainGoogleApiKey" class="alert-link open-quick-setup">default API key</a> will be used.</p>
                    </div>
                    <div class="mb-3 form-floating">
                        <input type="password" class="form-control" id="embeddingModelApiKey" placeholder="API key">
                        <label for="embeddingModelApiKey" class="form-label">Embedding model API key</label>
                    </div>
                    <div class="mb-3 form-floating">
                        <input list="embeddingModelsDataList" type="text" style="font-family: monospace" class="form-control" id="embeddingModelTechnicalName" placeholder="Technical name">
                        <label for="embeddingModelTechnicalName" class="form-label">Embedding model technical name</label>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-pane fade container-lg" id="personaSettingsPane" role="tabpanel" aria-labelledby="personaSettingsTab">
            <div class="card my-4">
                <div class="card-header">
                    <h5 class="card-title mt-1"><i class="bi bi-people"></i> Personas</h5>
                </div>
                <div class="card-body">
                    <div class="alert alert-info" role="alert">
                        <i class="bi bi-info-circle"></i>
                        <p>“Personas” are defined by the respective System Prompts, i.e. instructions that steer the behavior of large language models. Typically, system prompts start with “You are &lt;some character here&gt;” and may provide the model with information about the user so that the model can adapt its messages to the user’s knowledge and goals. <a target="_blank" href="https://promptengineering.org/system-prompts-in-large-language-models/" class="alert-link">Learn more about writing system prompts.</a></p>
                    </div>
                    <button aria-label="Add persona" class="btn btn-outline-primary my-3 px-2" id="newPersonaButton"><i class="bi bi-plus-square-fill"></i> Add persona</button>
                    <table id="personasTable" class="table table-striped table-hover row-border" style="width: 100%; bottom:0">
                        <thead>
                        <tr>
                            <th>Name</th>
                            <th>Description</th>
                            <th>Model</th>
                            <th>System instruction</th>
                            <th></th>
                        </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="tab-pane fade container-lg" id="actionSettingsPane" role="tabpanel" aria-labelledby="actionSettingsTab">
            <div class="card my-4">
                <div class="card-header"><h5 class="card-title mt-1"><i class="bi bi-play"></i> Custom code players</h5></div>
                <div class="card-body">
                    <div class="alert alert-info" role="alert">
                        <i class="bi bi-info-circle"></i>
                        <p>When chatting with a large language model, the default response format of the model (unless altered by some fancy system prompt) is <a target="_blank" href="https://commonmark.org/help/" class="alert-link">Markdown</a>. Markdown allows for inclusion of code blocks. For instance, a Python code block may look like this in raw Markdown syntax (note the <code>```</code> fences and <code>python</code> language tag):</p>
<pre><code>```python
if True:
    print("Hello, world!")
```</code></pre><p>“Code players” are small programs that interpret code blocks and produce HTML output. A code player is run in a sandboxed webpage in an iframe, and either populates the webpage inside the iframe (in case if interactivity is needed) or produces static HTML code that replaces the iframe upon execution. Examples of code players are available <a href="#" class="alert-link open-code-player-examples">here</a>.</p>
                    </div>
                    <button aria-label="Add a custom player" class="btn btn-outline-primary my-3 px-2" id="newCodePlayer"><i class="bi bi-plus-square-fill"></i> Add code player</button>
                    <table id="codePlayersTable" class="table table-striped table-hover row-border" style="width: 100%; bottom:0">
                        <thead>
                        <tr>
                            <th>Name</th>
                            <th>Language tag(s)</th>
                            <th>Description</th>
                            <th></th>
                        </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
            <div class="card my-4">
                <div class="card-header"><h5 class="card-title mt-1"><i class="bi bi-magic"></i> Custom actions</h5></div>
                <div class="card-body">
                    <button aria-label="Add custom action" class="btn btn-outline-primary my-3 px-2" id="newCustomActionButton"><i class="bi bi-plus-square-fill"></i> Add custom action</button>
                    <table id="customActionsTable" class="table table-striped table-hover row-border" style="width: 100%; bottom:0">
                        <thead>
                        <tr>
                            <th>Name</th>
                            <th>Handle</th>
                            <th>Menu item</th>
                            <th>Description</th>
                            <th></th>
                        </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="tab-pane fade container-lg" id="miscSettingsPane" role="tabpanel" aria-labelledby="miscSettingsTab">
            <div class="card my-4">
                <div class="card-header"><h5 class="card-title mt-1"><i class="bi bi-volume-up"></i> TTS Voice Preferences</h5></div>
                <div class="card-body">
                    <button aria-label="Add a TTS voice preference" class="btn btn-outline-primary my-3 px-2" id="newVoicePreferenceButton"><i class="bi bi-plus-square-fill"></i> Add voice preference</button>
                    <table id="voicePreferencesTable" class="table table-striped table-hover row-border" style="width: 100%; bottom:0">
                        <thead>
                        <tr>
                            <th>Language Code</th>
                            <th>Voice Name</th>
                            <th>Rate</th>
                            <th></th>
                        </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="tab-pane fade container-lg" id="aboutPane" role="tabpanel" aria-labelledby="aboutTab">
            <div class="card my-4">
                <div class="card-header"><h5 class="card-title mt-1"><i class="bi bi-info-circle"></i> About the A10fy extension</h5></div>
                <div class="card-body">
                    <h5 class="card-title">Homepage and repository</h5>
                    <div class="card-text">
                        This extension is developed by the <a target="_blank" href="https://a10fy.com">A10fy</a> team. The source code is available on <a target="_blank" href="https://github">GitHub</a>.
                    </div>
                    <h5 class="card-title mt-4 mb-2">Third-party software</h5>
                    <div class="card-text">
                        This extension would not have been possible without the following third-party software:
                        <ul>
                            <li><a target="_blank" href="https://getbootstrap.com/">Bootstrap</a> — a front-end framework. <a target="_blank" href="https://github.com/twbs/bootstrap/blob/main/LICENSE">MIT License</a>.</li>
                            <li><a target="_blank" href="https://codemirror.net/">CodeMirror</a> — a code editor component for the web. <a target="_blank" href="https://github.com/codemirror/dev/blob/main/LICENSE">MIT License</a>.</li>
                            <li><a target="_blank" href="https://datatables.net/">DataTables</a> — interactive tables for the web. <a target="_blank" href="https://datatables.net/license/mit">MIT License</a>.</li>
                            <li><a target="_blank" href="https://dexie.org/">Dexie</a> — an IndexedDB wrapper library. <a target="_blank" href="https://github.com/dexie/Dexie.js/blob/master/LICENSE">Apache License</a>.</li>
                            <li><a target="_blank" href="https://github.com/google-gemini/generative-ai-js">Google Generative AI SDK</a> — a JavaScript Gemini SDK. <a target="_blank" href="https://github.com/google-gemini/generative-ai-js/blob/main/LICENSE">Apache License</a>.</li>
                            <li><a target="_blank" href="https://highlightjs.org/">Highlight.js</a> — a code highlighting library. <a target="_blank" href="https://github.com/highlightjs/highlight.js/blob/main/LICENSE">BSD 3-Clause License</a>.</li>
                            <li><a target="_blank" href="https://github.com/deepfates/hnsw">HNSW</a> — a JavaScript implementation of the Hierarchical Navigable Small Worlds algorithm.</li>
                            <li><a target="_blank" href="https://katex.org/">KaTeX</a> — a math typesetting library. <a target="_blank" href="https://github.com/KaTeX/KaTeX/blob/main/LICENSE">MIT License</a>.</li>
                            <li><a target="_blank" href="https://liquidjs.com/">LiquidJS</a> — a safe templating engine. <a target="_blank" href="https://github.com/harttle/liquidjs/blob/master/LICENSE">MIT License</a>.</li>
                            <li><a target="_blank" href="https://github.com/markdown-it/markdown-it">Markdown-it</a> — an extensible Markdown parser. <a target="_blank" href="https://github.com/markdown-it/markdown-it/blob/master/LICENSE">MIT License</a>.</li>
                            <li><a target="_blank" href="https://mermaid.js.org/">Mermaid</a> — a JavaScript diagramming and charting tool. <a target="_blank" href="https://github.com/mermaid-js/mermaid/blob/develop/LICENSE">MIT License</a>.</li>
                            <li><a target="_blank" href="https://github.com/nodeca/pako">pako</a> — a JavaScript port of zlib. <a target="_blank" href="https://github.com/nodeca/pako/blob/master/LICENSE">MIT License</a>.</li>
                            <li><a target="_blank" href="https://github.com/pyodide/pyodide">Pyodide</a> — a Python distribution for the browser. <a target="_blank" href="https://github.com/pyodide/pyodide/blob/main/LICENSE">Mozilla Public License Version 2.0.</a></li>
                            <li><a target="_blank" href="https://github.com/mixmark-io/turndown">Turndown</a> — a tool to convert HTML to markdown. <a target="_blank" href="https://github.com/mixmark-io/turndown/blob/master/LICENSE">MIT License</a>.</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>



<!--<script src="js/bootstrap.js"></script>-->
<script src="js/settings.js"></script>
</body>
</html>